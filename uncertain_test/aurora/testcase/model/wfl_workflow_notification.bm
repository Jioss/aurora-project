<model baseTable="wfl_node_notification"  alias="e" xmlns="http://www.aurora-framework.org/schema/bm">
    <fields>
    	<field name="node_notification_id" datatype="java.lang.Long" databaseType="BIGINT" />
        <field name="workflow_id" datatype="java.lang.Long" databaseType="BIGINT" insertExpression="${../../@workflow_id}"  forUpdate="false"/>
        <field name="node_id" datatype="java.lang.Long" databaseType="BIGINT" />
        <field name="rule_code" datatype="java.lang.String" databaseType="VARCHAR" />
        <field name="rule_code_display" expression="(select description from wfl_notification_rules_vl where rule_code=e.rule_code)" forInsert="false" forUpdate="false"/>
        <ref-field name="parameter_1_type" sourceField="parameter_1_type" relationName="p1" forInsert="false" forUpdate="false"/>
        <ref-field name="parameter_1_url" sourceField="parameter_1_url" relationName="p1" forInsert="false" forUpdate="false"/>
        <field name="parameter_1_value" datatype="java.lang.String" databaseType="VARCHAR" />
        <field name="parameter_1_desc" datatype="java.lang.String" databaseType="VARCHAR" />
        <field name="parameter_2_value" datatype="java.lang.String" databaseType="VARCHAR" />
        <field name="parameter_2_desc" datatype="java.lang.String" databaseType="VARCHAR" />
        <field name="parameter_3_value" datatype="java.lang.String" databaseType="VARCHAR" />
        <field name="parameter_3_desc" datatype="java.lang.String" databaseType="VARCHAR" />
        <field name="parameter_4_value" datatype="java.lang.String" databaseType="VARCHAR" />
        <field name="parameter_4_desc" datatype="java.lang.String" databaseType="VARCHAR" />
        <field name="mail_template" datatype="java.lang.String" databaseType="VARCHAR" />
    </fields>
    <primary-key>
        <field name="node_notification_id"/>
    </primary-key>
    <relations>
    	<relation name="p1" joinType="LEFT OUTER" refModel="aurora.testcase.model.wfl_workflow_notification_rules">
            <reference localField="rule_code" foreignField="rule_code"/>
        </relation>
    </relations>
    <query-fields>
        <query-field field="workflow_id" queryOperator="="/>
    </query-fields>
    <data-filters>
    	<data-filter expression="rule_code is not null" />
    </data-filters>
    <order-by>
        <field name="node_notification_id"/>
    </order-by>
    <features>
        <sequence-pk xmlns="aurora.database.local.oracle" />
        <standard-who xmlns="aurora.database.features" />
    </features>
    <operations>
    	<operation name="update">
    		<parameters>
    			<parameter name="rule_code" datatype="java.lang.String"/>
    			<parameter name="mail_template" datatype="java.lang.String"/>
    		</parameters>
    		<update-sql>
    			update wfl_node_notification
    			set rule_code = ${@rule_code},
    			mail_template=nvl(${@mail_template},'[empty]')
    			#WHERE_CLAUSE#
    		</update-sql>
    	</operation>
    	<operation name="queryForTest">
    		<query-sql>
    			select * from wfl_node_notification
    			#WHERE_CLAUSE#
    			#ORDER_BY_CLAUSE#
    		</query-sql>
    	</operation>
    </operations>
</model>
